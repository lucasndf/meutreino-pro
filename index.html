<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MeuTreino PRO ‚Äî Login</title>

  <!-- Fonte -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- ==================== ESTILOS ==================== -->
  <style>
    :root {
      --bg: #0e0e0e;
      --panel: #1f1f1f;
      --muted: #2a2a2a;
      --text: #ffffff;
      --sub: #bdbdbd;
      --brand: #00e676;
      --danger: #ff4444;
      --border: #333;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    html, body {
      height:100%;
      margin:0;
      background:var(--bg);
      font-family:'Inter',sans-serif;
      color:var(--text);
    }
    .wrap { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px; }
    .card {
      width:100%; max-width:420px;
      background:var(--panel); border:1px solid var(--border);
      border-radius:18px; padding:30px;
      box-shadow:var(--shadow);
    }
    .hidden{display:none!important}
    .brand{display:flex; gap:10px; align-items:center;}
    .brand-logo{
      width:40px;height:40px;background:var(--brand);
      display:grid;place-items:center;color:#000;border-radius:10px;
    }
    .pro{color:var(--brand)}
    .title{font-size:22px; font-weight:700; margin:12px 0 6px;}
    .subtitle{font-size:14px; color:var(--sub); margin-bottom:20px;}

    .field{display:flex; flex-direction:column; gap:6px; margin-bottom:14px;}
    input{
      background:var(--muted);
      border:1px solid var(--border);
      border-radius:12px;
      padding:12px;
      outline:none;
      color:var(--text);
    }
    input:focus{
      border-color:var(--brand);
      box-shadow:0 0 0 2px rgba(0,230,118,.2);
    }

    .btn{
      width:100%;
      background:var(--brand);
      border:0;border-radius:12px;
      padding:14px;margin-top:6px;
      font-weight:700; cursor:pointer;
      color:#042912;
    }
    .btn.google{background:#fff;color:#111;border:1px solid #e9e9e9;}
    .btn.ghost{background:var(--muted);color:var(--text);}

    .linkbar{display:flex; justify-content:space-between;}
    .link{background:none;border:0;color:var(--brand);font-size:14px;cursor:pointer;}

    .alert{
      display:none;
      background:#261114;border:1px solid #3a1b1f;
      padding:10px;margin-bottom:10px;border-radius:10px;
    }
    .alert.ok{background:#0f2318;border-color:#1b3a29;color:#b6ffce;}

    .hr{display:flex;align-items:center;gap:10px;margin:18px 0;}
    .hr div{height:1px;background:var(--border);flex:1;}
    .hr span{color:var(--sub);font-size:12px;}

    /* APP */
    .app{width:100%;max-width:900px;margin:auto;}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
    .pill{background:var(--muted);padding:6px 12px;border-radius:8px;}
    .grid{display:grid;gap:16px;}
    .kpi{background:var(--panel);border:1px solid var(--border);padding:20px;border-radius:16px;}
  </style>
</head>

<body>

<main class="wrap">
  <!-- LOGIN E AUTENTICA√á√ÉO -->
  <section id="auth-card" class="card view active">
    <div class="brand">
      <div class="brand-logo">üèãÔ∏è</div>
      <h1>MeuTreino <span class="pro">PRO</span></h1>
    </div>
    <h2 class="title" id="view-title">Entrar</h2>
    <p class="subtitle" id="view-sub">Acesse sua conta para gerenciar seus treinos.</p>

    <div id="alert" class="alert"></div>

    <form id="form-login">
      <div class="field">
        <label>Email</label>
        <input id="login-email" type="email" placeholder="email@gmail.com" required>
      </div>
      <div class="field">
        <label>Senha</label>
        <input id="login-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
      </div>
      <button class="btn" type="submit">Entrar</button>
    </form>

    <form id="form-signup" class="hidden">
      <div class="field">
        <label>Seu nome</label>
        <input id="su-name" type="text" required>
      </div>
      <div class="field">
        <label>Email</label>
        <input id="su-email" type="email" required>
      </div>
      <div class="field">
        <label>Senha</label>
        <input id="su-pass" type="password" minlength="6" required>
      </div>
      <button class="btn" type="submit">Criar conta</button>
    </form>

    <form id="form-reset" class="hidden">
      <div class="field">
        <label>Seu e-mail</label>
        <input id="rs-email" type="email" required>
      </div>
      <button class="btn" type="submit">Enviar link</button>
    </form>

    <div class="hr"><div></div><span>ou</span><div></div></div>

    <button id="btn-google" class="btn google" type="button">Entrar com Google</button>

    <div class="linkbar">
      <button class="link" id="go-signup">Cadastrar</button>
      <button class="link" id="go-reset">Esqueci a senha</button>
    </div>
    <div class="linkbar">
      <button class="link hidden" id="go-login">Voltar ao login</button>
    </div>
  </section>

  <!-- DASHBOARD -->
  <section id="app" class="app hidden">
    <div class="topbar">
      <strong>MeuTreino PRO</strong>
      <span class="pill" id="user-pill">...</span>
      <button id="btn-logout" class="btn ghost">Sair</button>
    </div>

    <div class="grid">
      <div class="kpi">‚úÖ Login realizado com sucesso!</div>
      <div class="kpi">üöÄ Em breve: cadastro de alunos e treinos</div>
    </div>
  </section>
</main>

<!-- ==================== FIREBASE E L√ìGICA ==================== -->
<script type="module">
  // Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
  import {
    getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword,
    GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail,
    signOut, updateProfile, onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBsPf40matUV8So60OHb0h4oRwMRWaB0ho",
    authDomain: "acdm-70082.firebaseapp.com",
    projectId: "acdm-70082",
    storageBucket: "acdm-70082.firebasestorage.app",
    messagingSenderId: "236961358499",
    appId: "1:236961358499:web:40b7391c4c9b3405ff1516"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // UI
  const byId = (i)=>document.getElementById(i);
  const alertBox = byId("alert");
  const authCard = byId("auth-card");
  const appView = byId("app");
  const userPill = byId("user-pill");

  function showAlert(msg, ok=false){
    alertBox.textContent=msg;
    alertBox.classList.toggle("ok",ok);
    alertBox.style.display="block";
    setTimeout(()=>alertBox.style.display="none",ok?2000:4000);
  }

  function switchView(v){
    ["form-login","form-signup","form-reset"].forEach(id=>byId(id).classList.add("hidden"));
    byId("go-login").classList.remove("hidden");

    if(v==="signup"){
      byId("form-signup").classList.remove("hidden");
      byId("view-title").textContent="Criar conta";
      byId("view-sub").textContent="Digite seus dados abaixo";
    } else if(v==="reset"){
      byId("form-reset").classList.remove("hidden");
      byId("view-title").textContent="Recuperar senha";
      byId("view-sub").textContent="Receba o link no seu email";
    } else {
      byId("form-login").classList.remove("hidden");
      byId("view-title").textContent="Entrar";
      byId("view-sub").textContent="Acesse sua conta";
      byId("go-login").classList.add("hidden");
    }
  }

  byId("go-signup").onclick=()=>switchView("signup");
  byId("go-reset").onclick=()=>switchView("reset");
  byId("go-login").onclick=()=>switchView("login");

  byId("form-login").onsubmit=async(e)=>{
    e.preventDefault();
    try{
      await signInWithEmailAndPassword(auth,byId("login-email").value,byId("login-pass").value);
    }catch(e){showAlert("Erro: "+e.message);}
  };

  byId("form-signup").onsubmit=async(e)=>{
    e.preventDefault();
    try{
      const cred = await createUserWithEmailAndPassword(auth,byId("su-email").value,byId("su-pass").value);
      await updateProfile(cred.user,{displayName:byId("su-name").value});
      showAlert("Conta criada!",true);
    }catch(e){showAlert("Erro: "+e.message);}
  };

  byId("form-reset").onsubmit=async(e)=>{
    e.preventDefault();
    try{
      await sendPasswordResetEmail(auth,byId("rs-email").value);
      showAlert("Email enviado!",true);
      switchView("login");
    }catch(e){showAlert(e.message);}
  };

  byId("btn-google").onclick=async()=>{
    try{
      await signInWithPopup(auth,new GoogleAuthProvider());
    }catch(e){showAlert("Erro: "+e.message);}
  };

  byId("btn-logout").onclick=()=>signOut(auth);

  onAuthStateChanged(auth, u=>{
    if(u){
      authCard.classList.add("hidden");
      appView.classList.remove("hidden");
      userPill.textContent=u.displayName||u.email;
    } else {
      appView.classList.add("hidden");
      authCard.classList.remove("hidden");
    }
  });
</script>

</body>
</html>
